/*!	
 *	@author		HitkoDev http://hitko.eu/videobox
 *	@copyright	Copyright (C) 2016 HitkoDev All Rights Reserved.
 *	@license	http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
 *
 *	This program is free software: you can redistribute it and/or modify
 *	it under the terms of the GNU General Public License as published by
 *	the Free Software Foundation, either version 3 of the License, or
 *	any later version.
 *
 *	This program is distributed in the hope that it will be useful,
 *	but WITHOUT ANY WARRANTY; without even the implied warranty of
 *	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 *	GNU General Public License for more details.
 *
 *	You should have received a copy of the GNU General Public License
 *	along with this program. If not, see <http://www.gnu.org/licenses/>
 */
!function(a){function b(a,b,c){a in i||(i[a]={name:a,declarative:!0,deps:b,declare:c,normalizedDeps:b})}function c(a){return m[a]||(m[a]={name:a,dependencies:[],exports:{},importers:[]})}function d(b){if(!b.module){var e=b.module=c(b.name),f=b.module.exports,g=b.declare.call(a,function(a,b){if(e.locked=!0,"object"==typeof a)for(var c in a)f[c]=a[c];else f[a]=b;for(var d=0,g=e.importers.length;g>d;d++){var h=e.importers[d];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===e&&h.setters[i](f)}return e.locked=!1,b},b.name);e.setters=g.setters,e.execute=g.execute;for(var j=0,k=b.normalizedDeps.length;k>j;j++){var l,n=b.normalizedDeps[j],o=i[n],p=m[n];p?l=p.exports:o&&!o.declarative?l=o.esModule:o?(d(o),p=o.module,l=p.exports):l=h(n),p&&p.importers?(p.importers.push(e),e.dependencies.push(p)):e.dependencies.push(null),e.setters[j]&&e.setters[j](l)}}}function e(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(k)for(var d in b)"default"!==d&&f(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c.default=b,l(c,"__useDefault",{value:!0}),c}function f(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&l(a,c,d)}catch(d){return a[c]=b[c],!1}}function g(b,c){var d=i[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var k=d.normalizedDeps[e];-1==j.call(c,k)&&(i[k]?g(k,c):h(k))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function h(a){if(o[a])return o[a];if("@node/"==a.substr(0,6))return o[a]=e(n(a.substr(6)));var b=i[a];if(!b)throw"Module "+a+" not present.";return d(i[a]),g(a,[]),i[a]=void 0,b.declarative&&l(b.module.exports,"__esModule",{value:!0}),o[a]=b.declarative?b.module.exports:b.esModule}var i={},j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},k=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(a){k=!1}var l;!function(){try{Object.defineProperty({},"a",{})&&(l=Object.defineProperty)}catch(a){l=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(a){}}}}();var m={},n="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,o={"@empty":{}};return function(a,c,d,f){return function(g){g(function(g){for(var i=0;i<c.length;i++)(function(a,b){b&&b.__esModule?o[a]=b:o[a]=e(b)})(c[i],arguments[i]);f({register:b});var j=h(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)h(a[i]);return d?j.default:j})}}}("undefined"!=typeof self?self:global)(["1"],[],!1,function(a){this.require,this.exports,this.module;a.register("2",[],function(a,b){"use strict";function c(a){function b(b){a(h).html(b.options.closeText),a(b.options.root).append([m,k]),e(b.options.root)}function c(b){r=b,a(j).html(r.title);var c=d();t=!0;var e={top:(r.origin?-(a(k).innerHeight()/2-r.origin.y):0)+"px",left:(r.origin?-(a(k).innerWidth()/2-r.origin.x):0)+"px",maxWidth:r.origin?r.origin.width+"px":r.options.initialWidth},g={top:"0px",left:"0px",maxWidth:r.options.width+"px"};if(a(i).css(e),a([k,m]).toggleClass("visible",!0),a(k).toggleClass("animating",!0),r.origin){var h=100*r.origin.height/r.origin.width||c;h!=c&&u.push(l.animate([{paddingBottom:h+"%"},{paddingBottom:c+"%"}],r.options.animation))}var o=i.animate([e,g],r.options.animation);return a(i).css(g),o.addEventListener("finish",function(){var b=n.animate([{maxHeight:"0px"},{maxHeight:"200px"}],r.options.animation);a(n).toggleClass("visible",!0),b.addEventListener("finish",f),u.push(b)}),u.push(o),!1}function d(){if(r){e(r.options.root);var b=r.options.width,c=r.options.height;if(b+2*r.options.padding>a(k).innerWidth()){var d=a(k).innerWidth()-2*r.options.padding;c=c*d/b,b=d}c+2*r.options.padding>a(k).innerHeight()&&(c=a(k).innerHeight()-2*r.options.padding);var f=100*c/b;return a(l).css("paddingBottom",f+"%"),f}}function e(b){var c=a(k).position(),d=a(k).offset(),e=a("html").offset();a(b)[0]!=a("body")[0]&&(c.top+=a(b).scrollTop(),c.left+=a(b).scrollLeft()),a(k).css({top:c.top+e.top+window.scrollY-d.top,left:c.left+e.left+window.scrollX-d.left})}function f(){t&&""==a(o).attr("src")&&(a(o).show(),o.src=r.url,a(k).toggleClass("animating",!1))}function g(){for(var b=0;b<u.length;b++)u[b].cancel();u=[],t=!1,o.src="",a(o).hide(),a(k).toggleClass("animating",!1)}var h,i,j,k,l,m,n,o,p,q,r,s=a(window),t=!1,u=[],v={width:720,height:405,closeText:"Close",padding:30,initialWidth:"15%",root:a("body")[0],animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}};a.videobox=function(d){a.vbiClose(),a.vbClose(),d.options=a.extend(!0,{},v,d.options),b(d);var e=d.origin.target,f=a(a(e).find(a(e).attr("data-target"))[0]||e),g=k.getBoundingClientRect(),h=f[0].getBoundingClientRect();return f.toggleClass("vb_line_fix",!0),d.origin=a.extend(!0,{},{x:h.left-g.left+f.innerWidth()/2,y:h.top-g.top+f.innerHeight()/2,width:f.innerWidth(),height:f.innerHeight()},d.origin),f.toggleClass("vb_line_fix",!1),c(d),!1},a.vbClose=function(){return g(),a([k,n,m]).toggleClass("visible",!1),a(k).css({top:0,left:0}),r=null,!1},a.fn.videobox=function(b,c){void 0===b&&(b={}),void 0===c&&(c=function(b){var c=JSON.parse(b.getAttribute("data-videobox"))||{};if(c.root){var d=a(c.root);d.length>0?c.root=d[0]:c.pop("root")}return{url:b.getAttribute("href")||"",title:b.getAttribute("title")||"",options:c,origin:{target:b}}});var d=this;return d.off("click").on("click",function(d){var e=c(this);return e.options=a.extend(!0,{},b,e.options),a.videobox(e)}),!1},a(window).on("load",function(){a(v.root).append(a([m=a('<div id="vbOverlay" />').click(a.vbClose)[0],k=a('<div id="vbWrap" />')[0]])),i=a('<div id="vbCenter" />').appendTo(k).append([l=a('<div id="vbResponsive" />')[0],n=a('<div id="vbBottomContainer" />')[0]])[0],o=a('<iframe id="vbVideo" frameborder="0" allowfullscreen="true" oallowfullscreen msallowfullscreen webkitallowfullscreen mozallowfullscreen />').css("display","none").appendTo(l)[0],p=a('<div id="vbBottom" />').appendTo(n).append([q=a('<a id="vbCloseLink" href="#" ><span id="vbCloseText">'+v.closeText+'</span><i class="vb-icon-close"></i></a>').click(a.vbClose)[0],j=a('<strong id="vbCaption" />')[0]])[0],h=a(p).find("#vbCloseText")[0],s.on("resize",function(){t&&r&&d()})})}b&&b.id;return a("box",c),{setters:[],execute:function(){}}}),a.register("3",[],function(a,b){"use strict";function c(a){function b(b){k=b,c(),a(f).attr("style",k.options.style),a(f).attr("class",k.options.class),a(h).html(k.title),l=!0;var e={maxWidth:(k.origin?k.origin.width:k.options.initialWidth)+"px"},i={maxWidth:k.options.width+2*k.options.padding+"px"},j=f.animate([e,i],k.options.animation);a(f).css(i),j.addEventListener("finish",d),n.push(j);var m={paddingBottom:100*k.options.height/k.options.width+"%"};if(k.origin){var o={paddingBottom:100*k.origin.height/k.origin.width+"%"},p=g.animate([o,m],k.options.animation);n.push(p)}a(g).css(m)}function c(){a(k.origin.target).after(f),a(k.origin.target).hide(),o.push(k.origin.target)}function d(){l&&(a(j).show(),j.src=k.url)}function e(){for(var b=0;b<n.length;b++)n[b].cancel();n=[],l=!1,j.src="",a(j).hide()}var f,g,h,i,j,k,l=(a(window),!1),m=!1,n=[],o=[],p={width:720,height:405,closeText:"Close",padding:30,animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}};a.vbinline=function(c){a.vbClose(),c.options=a.extend(!0,{},p,c.options);var d=c.origin.target,e=a(a(d).find(a(d).attr("data-target"))[0]||d);return e.toggleClass("vb_line_fix",!0),c.origin=a.extend(!0,{},{width:e.innerWidth(),height:e.innerHeight()},c.origin),e.toggleClass("vb_line_fix",!1),a.vbiClose(function(){return b(c)}),!1},a.vbiClose=function(b){if(e(),!m)if(a(f).parent().length>0&&k){m=!0;var c=(k.origin?k.origin.width:k.options.initialWidth)+"px",d=f.animate([{maxWidth:k.options.width+2*k.options.padding+"px"},{maxWidth:c}],k.options.animation);if(a(f).css("maxWidth",c),d.addEventListener("finish",function(){a(f).detach();for(var c=0;c<o.length;c++)a(o[c]).show();o=[],m=!1,k=null,"function"==typeof b&&b()}),k.origin){var h=100*k.origin.height/k.origin.width+"%";g.animate([{paddingBottom:100*k.options.height/k.options.width+"%"},{paddingBottom:h}],k.options.animation);a(g).css("paddingBottom",h)}}else{if(a(f).parent().length>0){a(f).detach();for(var i=0;i<o.length;i++)a(o[i]).show();o=[]}k=null,"function"==typeof b&&b()}return!1},a.fn.vbinline=function(b,c){void 0===b&&(b={}),void 0===c&&(c=function(a){return{url:a.getAttribute("href")||"",title:a.getAttribute("title")||"",options:JSON.parse(a.getAttribute("data-videobox"))||{},origin:{target:a}}});var d=this;return d.off("click").on("click",function(d){var e=c(this);return e.options=a.extend(!0,{},b,e.options),a.vbinline(e)}),!1},a(window).on("load",function(){f=a('<div id="vbiWrap" />').append([g=a('<div id="vbiResponsive" />')[0],h=a('<span class="vb_video_title"></span>')[0],i=a('<div id="vbiClose"><i class="vb-icon-circle-close-invert"></i></div>').click(a.vbiClose)[0]])[0],j=a('<iframe id="vbiVideo" frameborder="0" allowfullscreen="true" oallowfullscreen msallowfullscreen webkitallowfullscreen mozallowfullscreen />').css("display","none").appendTo(g)[0]})}b&&b.id;return a("inline",c),{setters:[],execute:function(){}}}),a.register("4",[],function(a,b){"use strict";function c(a){var b=function(){function b(b,c){var d=this;this.outer=a('<div class="vb_slider_outer"></div>')[0],this.wrap=a('<div class="vb_slider_wrap"></div>').appendTo(this.outer)[0],this.content=a('<div class="vb_slider_cont"></div>').appendTo(this.wrap)[0],this.prev=a('<div class="vb_slider_prev"><i class="vb-icon-prev"></i></div>').prependTo(this.outer)[0],this.next=a('<div class="vb_slider_next"><i class="vb-icon-next"></i></div>').appendTo(this.outer)[0],this.buttons=a(this.outer).find("i"),this.queue=[],this.timeout=-1,this.moving=!1,this.visible=-1,this.detachedElements=[],this.options={moveAll:!1,target:"",singleDuration:500,doubleClickTimeout:200,animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}},this.target=b;var e=a(b).children();a(this.outer).insertAfter(b),a(this.content).append(b),this.basis=parseInt(a(b).attr("data-width"))||e.innerWidth(),a.extend(this.options,c),a(this.content).toggleClass("vb-slider__move-all",this.options.moveAll),a(this.prev).click(function(){return d.showPrev()}),a(this.next).click(function(){return d.showNext()}),this.setCount()}return b.prototype.showPrev=function(){this.queueMove("r")},b.prototype.showNext=function(){this.queueMove("l")},b.prototype.setBasis=function(a){a!=this.basis&&(this.basis=a,this.setCount())},b.prototype.isMoving=function(){return this.moving},b.prototype.getTarget=function(){return this.target},b.prototype.queueMove=function(a){var b=this;this.queue.length>0&&this.queue[this.queue.length-1]!=a?this.queue.pop():this.queue.push(a),this.timeout>=0&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){b.timeout=-1,!b.moving&&b.queue.length>0&&b.move()},this.options.doubleClickTimeout)},b.prototype.move=function(){var c=this;this.moving=!0;for(var d=this.queue.pop(),e=1;this.queue.length>0;)e+=this.queue.pop()==d?1:-1;if(0==e)return void(this.moving=!1);e<0&&(d="l"==d?"r":"l",e=0-e);var f=(this.options.moveAll?this.visible:1)*e;f%=this.visible+this.detachedElements.length;for(var g=0;g<f&&this.detachedElements.length>0;g++)"l"==d?a(this.target).append(this.detachedElements.shift()):a(this.target).prepend(this.detachedElements.pop());var h=a(this.target).children(),i="l"==d?h.slice(0,h.length-this.visible):h.slice(this.visible);b.detach(i);var j=a(this.target).innerHeight(),k=100*f/this.visible;"l"==d?a(this.target).prepend(i):a(this.target).append(i);var l=this.options.singleDuration?a.extend({},this.options.animation,{duration:this.options.singleDuration*f}):this.options.animation,m={marginLeft:("l"==d?0:-k)+"%",marginRight:("l"==d?-k:0)+"%"},n={marginLeft:("l"==d?-k:0)+"%",marginRight:("l"==d?0:-k)+"%"},o=this.content.animate([m,n],l);o.addEventListener("finish",function(){return c.skip(d)}),o=this.content.animate([{height:a(this.content).css("height")},{height:j+"px"}],l),a(this.content).css("height",j),this.buttons.css("top",this.options.target?a(this.target).find(this.options.target).outerHeight(!0)/2:"")},b.detach=function(b){b.find("#vbiWrap").length>0&&a.vbiClose(),b.detach()},b.prototype.skip=function(c){var d=a(this.target).children();if("l"==c){var e=d.slice(0,d.length-this.visible);b.detach(e);for(var f=0;f<e.length;f++)this.detachedElements.push(e[f])}else if("r"==c){var e=d.slice(this.visible);b.detach(e);for(var f=0;f<e.length;f++)this.detachedElements.unshift(e[f])}this.queue.length>0&&this.timeout<0?this.move():this.moving=!1},b.prototype.setCount=function(){var b=this.visible,c=a(this.target).innerWidth(),d=this.basis+a(this.target).children().outerWidth(!0)-a(this.target).children().innerWidth(),e=Math.floor(c/this.basis);if(e<1)e=1;else{var f=2-d/(c/e),g=d/(c/(e+1));g<f&&e++}e!=b&&(this.visible=e,this.setAttached()),a(this.content).css("height",a(this.target).innerHeight()),this.buttons.css("top",this.options.target?a(this.target).find(this.options.target).outerHeight(!0)/2:"")},b.prototype.setAttached=function(){var c=a(this.target).children();if(c.length<this.visible)for(var d=c.length;d<this.visible&&this.detachedElements.length>0;d++)a(this.target).append(this.detachedElements.shift());else if(c.length>this.visible)for(var d=c.length-1;d>=this.visible;d--)this.detachedElements.unshift(c[d]),b.detach(a(c[d]))},b}(),c=[];a.vbSlider=function(d,e){void 0===e&&(e={});for(var f=0;f<c.length;f++)if(c[f].getTarget()==d)return a.extend(c[f].options,e),c[f];return new b(d,e)},a.fn.vbSlider=function(b){void 0===b&&(b={});for(var c=[],d=0;d<this.length;d++){var e=this[d],f={},g=a(e).attr("data-target"),h=a(e).attr("data-move");g&&(f.target=g),h&&h.trim()&&(f.moveAll="all"==h.trim()),c.push(a.vbSlider(e,a.extend({},b,f)))}return c},a(window).on("resize",function(){for(var a=0;a<c.length;a++)c[a].setCount()})}b&&b.id;return a("slider",c),{setters:[],execute:function(){}}}),a.register("5",["2","3","4"],function(a,b){"use strict";function c(a){d.box(a),e.inline(a),f.slider(a),a(window).on("load",function(){var b=a(".mdl-layout.mdl-js-layout")[0];b||(b=a("body")[0]),a("a[rel^='videobox']").videobox({root:b}),a("a[rel^='vbinline']").vbinline({}),a(".vb_slider").vbSlider({})})}var d,e,f;b&&b.id;return a("videobox",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),a.register("1",["5"],function(a,b){"use strict";var c;b&&b.id;return{setters:[function(a){c=a}],execute:function(){c.videobox(jQuery)}}})})(function(a){a()});
//# sourceMappingURL=videobox.min.js.map
/*!	
 *	@author		HitkoDev http://hitko.eu/videobox
 *	@copyright	Copyright (C) 2016 HitkoDev All Rights Reserved.
 *	@license	http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
 *
 *	This program is free software: you can redistribute it and/or modify
 *	it under the terms of the GNU General Public License as published by
 *	the Free Software Foundation, either version 3 of the License, or
 *	any later version.
 *
 *	This program is distributed in the hope that it will be useful,
 *	but WITHOUT ANY WARRANTY; without even the implied warranty of
 *	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 *	GNU General Public License for more details.
 *
 *	You should have received a copy of the GNU General Public License
 *	along with this program. If not, see <http://www.gnu.org/licenses/>
 */
function create(t,e,i){return t=document.createElement(t),e&&(t.id=e),i&&(t.onclick=i),t}function createClass(t,e,i){return t=document.createElement(t),e&&(t.className=e),i&&(t.onclick=i),t}function iterableToArray(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}function applyStyles(t,e){for(var i in e)i in t.style&&(t.style[i]=e[i])}function hide(t){t.originalDisplay=t.style.display&&("none"==t.style.display?"":t.style.display)||"",t.style.display="none"}function show(t){t.style.display="originalDisplay"in t&&t.originalDisplay?t.originalDisplay:""}function insertAfter(t,e){e.parentElement.insertBefore(t,e.nextSibling)}function toggleClass(t,e,i){(t.classList.contains(e)?!i:i)&&t.classList.toggle(e)}function libBind(t){t.videobox=function(t){VideoboxObj.open(t)},t.vbClose=function(){VideoboxObj.close()},t.fn.videobox=function(t,e){t=void 0===t?{}:t;var i=iterableToArray(this);e?VideoboxObj.bind(i,t,e):VideoboxObj.bind(i,t)}}function libBind$1(t){t.vbInline=function(t){VbInlineObj.open(t)},t.vbiClose=function(t){VbInlineObj.close(t)},t.fn.vbInline=function(t,e){t=void 0===t?{}:t;var i=iterableToArray(this);e?VbInlineObj.bind(i,t,e):VbInlineObj.bind(i,t)}}function detach(t){t.forEach(function(t){"querySelector"in t&&t.querySelector("#vbiWrap")&&VbInlineObj.close(),t.parentNode.removeChild(t)})}function libBind$2(t){t.vbSlider=function(t,e){return e=void 0===e?{}:e,"length"in t&&(t=t[0]),VbSlider.getSlider(t,e)},t.fn.vbSlider=function(t){t=void 0===t?{}:t;var e=iterableToArray(this);return VbSlider.bind(e,t)}}function bindAll(){VideoboxObj.bind("a[rel^='videobox']"),VbInlineObj.bind("a[rel^='vbinline']"),VbSlider.bind(".vb_slider")}var $jscomp={scope:{},getGlobal:function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof global&&null!=global?global:t}};$jscomp.global=$jscomp.getGlobal(this),$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){if(i.get||i.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},$jscomp.polyfill=function(t,e,i,n){if(e){for(i=$jscomp.global,t=t.split("."),n=0;n<t.length-1;n++){var r=t[n];r in i||(i[r]={}),i=i[r]}t=t[t.length-1],n=i[t],e=e(n),e!=n&&null!=e&&$jscomp.defineProperty(i,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.fill",function(t){return t?t:function(t,e,i){var n=this.length||0;for(0>e&&(e=Math.max(0,n+e)),(null==i||i>n)&&(i=n),i=Number(i),0>i&&(i=Math.max(0,n+i)),e=Number(e||0);e<i;e++)this[e]=t;return this}},"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var e=0;return $jscomp.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),t={next:t},t[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.polyfill("Array.from",function(t){return t?t:function(t,e,i){$jscomp.initSymbolIterator(),e=null!=e?e:function(t){return t};var n=[],r=t[Symbol.iterator];if("function"==typeof r)for(t=r.call(t);!(r=t.next()).done;)n.push(e.call(i,r.value));else for(var r=t.length,o=0;o<r;o++)n.push(e.call(i,t[o]));return n}},"es6-impl","es3"),$jscomp.owns=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},$jscomp.polyfill("Object.assign",function(t){return t?t:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)$jscomp.owns(n,r)&&(t[r]=n[r])}return t}},"es6-impl","es3"),$jscomp.findInternal=function(t,e,i){t instanceof String&&(t=String(t));for(var n=t.length,r=0;r<n;r++){var o=t[r];if(e.call(i,o,r,t))return{i:r,v:o}}return{i:-1,v:void 0}},$jscomp.polyfill("Array.prototype.find",function(t){return t?t:function(t,e){return $jscomp.findInternal(this,t,e).v}},"es6-impl","es3"),!function(a,c){var e={},k={};!function(t,e){function i(){this._endDelay=this._delay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=d}function n(){return t.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function r(e,n,r){var o=new i;return n&&(o.fill="both",o.duration="auto"),"number"!=typeof e||isNaN(e)?void 0!==e&&Object.getOwnPropertyNames(e).forEach(function(i){"auto"==e[i]||("number"==typeof o[i]||"duration"==i)&&("number"!=typeof e[i]||isNaN(e[i]))||"fill"==i&&-1==u.indexOf(e[i])||"direction"==i&&-1==h.indexOf(e[i])||"playbackRate"==i&&1!==e[i]&&t.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(o[i]=e[i])}):o.duration=e,o}function o(t,e,i,n){return 0>t||1<t||0>i||1<i?d:function(r){if(0>=r){var o=0;return 0<t?o=e/t:!e&&0<i&&(o=n/i),o*r}if(1<=r)return o=0,1>i?o=(n-1)/(i-1):1==i&&1>t&&(o=(e-1)/(t-1)),1+o*(r-1);for(var o=0,s=1;o<s;){var a=(o+s)/2,l=3*t*(1-a)*(1-a)*a+3*i*(1-a)*a*a+a*a*a;if(1e-5>Math.abs(r-l))break;l<r?o=a:s=a}return 3*e*(1-a)*(1-a)*a+3*n*(1-a)*a*a+a*a*a}}function s(t,e){return function(i){if(1<=i)return 1;var n=1/t;return i+=e*n,i-i%n}}function a(t){b||(b=document.createElement("div").style),b.animationTimingFunction="",b.animationTimingFunction=t;var e=b.animationTimingFunction;if(""==e&&n())throw new TypeError(t+" is not a valid value for easing");return e}function l(t){if("linear"==t)return d;var e=v.exec(t);return e?o.apply(this,e.slice(1).map(Number)):(e=y.exec(t))?s(Number(e[1]),{start:p,middle:f,end:m}[e[2]]):(t=g[t])?t:d}function c(t,e,i){if(null==e)return _;var n=i.delay+t+i.endDelay;return e<Math.min(i.delay,n)?x:e>=Math.min(i.delay+t,n)?w:T}var u=["backwards","forwards","both","none"],h=["reverse","alternate","alternate-reverse"],d=function(t){return t};i.prototype={_setMember:function(e,i){this["_"+e]=i,this._effect&&(this._effect._timingInput[e]=i,this._effect._timing=t.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=t.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(t){this._setMember("delay",t)},get delay(){return this._delay},set endDelay(t){this._setMember("endDelay",t)},get endDelay(){return this._endDelay},set fill(t){this._setMember("fill",t)},get fill(){return this._fill},set iterationStart(t){if((isNaN(t)||0>t)&&n())throw new TypeError("iterationStart must be a non-negative number, received: "+timing.iterationStart);this._setMember("iterationStart",t)},get iterationStart(){return this._iterationStart},set duration(t){if("auto"!=t&&(isNaN(t)||0>t)&&n())throw new TypeError("duration must be non-negative or auto, received: "+t);this._setMember("duration",t)},get duration(){return this._duration},set direction(t){this._setMember("direction",t)},get direction(){return this._direction},set easing(t){this._easingFunction=l(a(t)),this._setMember("easing",t)},get easing(){return this._easing},set iterations(t){if((isNaN(t)||0>t)&&n())throw new TypeError("iterations must be non-negative, received: "+t);this._setMember("iterations",t)},get iterations(){return this._iterations}};var p=1,f=.5,m=0,g={ease:o(.25,.1,.25,1),"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1),"step-start":s(1,p),"step-middle":s(1,f),"step-end":s(1,m)},b=null,v=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,y=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,_=0,x=1,w=2,T=3;t.cloneTimingInput=function(t){if("number"==typeof t)return t;var e,i={};for(e in t)i[e]=t[e];return i},t.makeTiming=r,t.numericTimingToObject=function(t){return"number"==typeof t&&(t=isNaN(t)?{duration:0}:{duration:t}),t},t.normalizeTimingInput=function(e,i){return e=t.numericTimingToObject(e),r(e,i)},t.calculateActiveDuration=function(t){return Math.abs((0===t.duration||0===t.iterations?0:t.duration*t.iterations)/t.playbackRate)},t.calculateIterationProgress=function(t,e,i){var n=c(t,e,i);t:{var r=i.fill;switch(n){case x:t="backwards"==r||"both"==r?0:null;break t;case T:t=e-i.delay;break t;case w:t="forwards"==r||"both"==r?t:null;break t;case _:t=null;break t}t=void 0}return null===t?null:(e=i.duration,r=i.iterationStart,0===e?n!==x&&(r+=i.iterations):r+=t/e,e=r,r=e===1/0?i.iterationStart%1:e%1,0!==r||n!==w||0===i.iterations||0===t&&0!==i.duration||(r=1),t=r,r=n===w&&i.iterations===1/0?1/0:1===t?Math.floor(e)-1:Math.floor(e),e=n=i.direction,"normal"!==n&&"reverse"!==n&&("alternate-reverse"===n&&(r+=1),e="normal",r!==1/0&&0!==r%2&&(e="reverse")),i._easingFunction("normal"===e?t:1-t))},t.calculatePhase=c,t.normalizeEasing=a,t.parseEasingFunction=l}(e,null),function(t,e){function i(t){var e,i=[];for(e in t)if(!(e in["easing","offset","composite"])){var n=t[e];Array.isArray(n)||(n=[n]);for(var r,o=n.length,s=0;s<o;s++)r={},"offset"in t?r.offset=t.offset:1==o?r.offset=1:r.offset=s/(o-1),"easing"in t&&(r.easing=t.easing),"composite"in t&&(r.composite=t.composite),r[e]=n[s],i.push(r)}return i.sort(function(t,e){return t.offset-e.offset}),i}var n={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},r=document.createElementNS("http://www.w3.org/1999/xhtml","div");e={thin:"1px",medium:"3px",thick:"5px"};var o={borderBottomWidth:e,borderLeftWidth:e,borderRightWidth:e,borderTopWidth:e,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:e,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};t.convertToArrayForm=i,t.normalizeKeyframes=function(e){function s(){var t=a.length;null==a[t-1].offset&&(a[t-1].offset=1),1<t&&null==a[0].offset&&(a[0].offset=0);for(var e=0,i=a[0].offset,n=1;n<t;n++){var r=a[n].offset;if(null!=r){for(var o=1;o<n-e;o++)a[e+o].offset=i+(r-i)*o/(n-e);e=n,i=r}}}if(null==e)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&e[Symbol.iterator]&&(e=Array.from(e)),Array.isArray(e)||(e=i(e));var a=e.map(function(e){var i,s={};for(i in e){var a=e[i];if("offset"==i){if(null!=a){if(a=Number(a),!isFinite(a))throw new TypeError("Keyframe offsets must be numbers.");if(0>a||1<a)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else if("composite"==i){if("add"==a||"accumulate"==a)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=a)throw new TypeError("Invalid composite mode "+a+".")}else a="easing"==i?t.normalizeEasing(a):""+a;var l=void 0,c=i,u=a,a=s,h=c;if("display"!==h&&0!==h.lastIndexOf("animation",0)&&0!==h.lastIndexOf("transition",0))if(h=n[c])for(l in r.style[c]=u,h)c=h[l],u=r.style[c],a[c]=c in o?o[c][u]||u:u;else a[c]=c in o?o[c][u]||u:u}return void 0==s.offset&&(s.offset=null),void 0==s.easing&&(s.easing="linear"),s});e=!0;for(var l=-(1/0),c=0;c<a.length;c++){var u=a[c].offset;if(null!=u){if(u<l)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");l=u}else e=!1}return a=a.filter(function(t){return 0<=t.offset&&1>=t.offset}),e||s(),a}}(e,null),function(t){var e={};t.isDeprecated=function(t,i,n,r){r=r?"are":"is";var o=new Date;return i=new Date(i),i.setMonth(i.getMonth()+3),!(o<i&&(t in e||console.warn("Web Animations: "+t+" "+r+" deprecated and will stop working on "+i.toDateString()+". "+n),e[t]=!0,1))},t.deprecated=function(e,i,n,r){var o=r?"are":"is";if(t.isDeprecated(e,i,n,r))throw Error(e+" "+o+" no longer supported. "+n)}}(e),function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),c=!0;if(a&&(c=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(t){void 0===a[t]&&(c=!0)})),!c)return}!function(t,e,i){function n(t){for(var e={},i=0;i<t.length;i++)for(var n in t[i])if("offset"!=n&&"easing"!=n&&"composite"!=n){var r={offset:t[i].offset,easing:t[i].easing,value:t[i][n]};e[n]=e[n]||[],e[n].push(r)}for(var o in e)if(t=e[o],0!=t[0].offset||1!=t[t.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"};return e}function r(i){var n,r=[];for(n in i)for(var o=i[n],s=0;s<o.length-1;s++){var a=s,l=s+1,c=o[a].offset,u=o[l].offset,h=c,d=u;0==s&&(h=-(1/0),0==u&&(l=a)),s==o.length-2&&(d=1/0,1==c&&(a=l)),r.push({applyFrom:h,applyTo:d,startOffset:o[a].offset,endOffset:o[l].offset,easingFunction:t.parseEasingFunction(o[a].easing),property:n,interpolation:e.propertyInterpolation(n,o[a].value,o[l].value)})}return r.sort(function(t,e){return t.startOffset-e.startOffset}),r}e.convertEffectInput=function(i){i=t.normalizeKeyframes(i);var o=n(i),s=r(o);return function(t,i){if(null!=i)s.filter(function(t){return i>=t.applyFrom&&i<t.applyTo}).forEach(function(n){var r=i-n.startOffset,o=n.endOffset-n.startOffset,r=0==o?0:n.easingFunction(r/o);e.apply(t,n.property,n.interpolation(r))});else for(var n in o)"offset"!=n&&"easing"!=n&&"composite"!=n&&e.clear(t,n)}}}(e,k,null),function(t,e,i){function n(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}var r={};e.addPropertiesHandler=function(t,e,i){for(var o=0;o<i.length;o++){var s=t,a=e,l=n(i[o]);r[l]=r[l]||[],r[l].push([s,a])}};var o={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};e.propertyInterpolation=function(i,s,a){var l=i;for(/-/.test(i)&&!t.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(l=n(i)),"initial"!=s&&"initial"!=a||("initial"==s&&(s=o[l]),"initial"==a&&(a=o[l])),i=s==a?[]:r[l],l=0;i&&l<i.length;l++){var c=i[l][0](s),u=i[l][0](a);if(void 0!==c&&void 0!==u&&(c=i[l][1](c,u))){var h=e.Interpolation.apply(null,c);return function(t){return 0==t?s:1==t?a:h(t)}}}return e.Interpolation(!1,!0,function(t){return t?a:s})}}(e,k,null),function(t,e,i){function n(e){var i=t.calculateActiveDuration(e),n=function(n){return t.calculateIterationProgress(i,n,e)};return n._totalDuration=e.delay+i+e.endDelay,n}e.KeyframeEffect=function(i,r,o,s){var a,l=n(t.normalizeTimingInput(o)),c=e.convertEffectInput(r);return r=function(){c(i,a)},r._update=function(t){return a=l(t),null!==a},r._clear=function(){c(i,null)},r._hasSameTarget=function(t){return i===t},r._target=i,r._totalDuration=l._totalDuration,r._id=s,r},e.NullEffect=function(t){var e=function(){t&&(t(),t=null)};return e._update=function(){return null},e._totalDuration=0,e._hasSameTarget=function(){return!1},e}}(e,k,null),function(t,e){function i(t,e,i){i.enumerable=!0,i.configurable=!0,Object.defineProperty(t,e,i)}function n(t){for(this._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style,this._style=t.style,this._length=0,this._isAnimatedProperty={},t=0;t<this._style.length;t++){var e=this._style[t];this._surrogateStyle[e]=this._style[e]}this._updateIndices()}function r(t){if(!t._webAnimationsPatchedStyle){var e=new n(t);try{i(t,"style",{get:function(){return e}})}catch(e){t.style._set=function(e,i){t.style[e]=i},t.style._clear=function(e){t.style[e]=""}}t._webAnimationsPatchedStyle=t.style}}e={cssText:1,length:1,parentRule:1};var o={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},s={removeProperty:1,setProperty:1};n.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(t){for(var e={},i=0;i<this._surrogateStyle.length;i++)e[this._surrogateStyle[i]]=!0;for(this._surrogateStyle.cssText=t,this._updateIndices(),i=0;i<this._surrogateStyle.length;i++)e[this._surrogateStyle[i]]=!0;for(var n in e)this._isAnimatedProperty[n]||this._style.setProperty(n,this._surrogateStyle.getPropertyValue(n))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(t){return function(){return this._surrogateStyle[t]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(t,e){this._style[t]=e,this._isAnimatedProperty[t]=!0},_clear:function(t){this._style[t]=this._surrogateStyle[t],delete this._isAnimatedProperty[t]}};for(var a in o)n.prototype[a]=function(t,e){return function(){var i=this._surrogateStyle[t].apply(this._surrogateStyle,arguments);return e&&(this._isAnimatedProperty[arguments[0]]||this._style[t].apply(this._style,arguments),this._updateIndices()),i}}(a,a in s);for(var l in document.documentElement.style)l in e||l in o||!function(t){i(n.prototype,t,{get:function(){return this._surrogateStyle[t]},set:function(e){this._surrogateStyle[t]=e,this._updateIndices(),this._isAnimatedProperty[t]||(this._style[t]=e)}})}(l);t.apply=function(e,i,n){r(e),e.style._set(t.propertyName(i),n)},t.clear=function(e,i){e._webAnimationsPatchedStyle&&e.style._clear(t.propertyName(i))}}(k,null),function(t){window.Element.prototype.animate=function(e,i){var n="";return i&&i.id&&(n=i.id),t.timeline._play(t.KeyframeEffect(this,e,i,n))}}(k),function(t,e){function i(t,e,n){if("number"==typeof t&&"number"==typeof e)return t*(1-n)+e*n;if("boolean"==typeof t&&"boolean"==typeof e)return.5>n?t:e;if(t.length==e.length){for(var r=[],o=0;o<t.length;o++)r.push(i(t[o],e[o],n));return r}throw"Mismatched interpolation arguments "+t+":"+e}t.Interpolation=function(t,e,n){return function(r){return n(i(t,e,r))}}}(k,null),function(t,e){e=function(){function t(t,e){for(var i=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],n=0;4>n;n++)for(var r=0;4>r;r++)for(var o=0;4>o;o++)i[n][r]+=e[n][o]*t[o][r];return i}return function(e,i,n,r,o){for(var s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],a=0;4>a;a++)s[a][3]=o[a];for(a=0;3>a;a++)for(o=0;3>o;o++)s[3][a]+=e[o]*s[o][a];e=r[0],a=r[1],o=r[2],r=r[3];var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];for(l[0][0]=1-2*(a*a+o*o),l[0][1]=2*(e*a-o*r),l[0][2]=2*(e*o+a*r),l[1][0]=2*(e*a+o*r),l[1][1]=1-2*(e*e+o*o),l[1][2]=2*(a*o-e*r),l[2][0]=2*(e*o-a*r),l[2][1]=2*(a*o+e*r),l[2][2]=1-2*(e*e+a*a),s=t(s,l),r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],n[2]&&(r[2][1]=n[2],s=t(s,r)),n[1]&&(r[2][1]=0,r[2][0]=n[0],s=t(s,r)),n[0]&&(r[2][0]=0,r[1][0]=n[0],s=t(s,r)),a=0;3>a;a++)for(o=0;3>o;o++)s[a][o]*=i[a];return 0==s[0][2]&&0==s[0][3]&&0==s[1][2]&&0==s[1][3]&&0==s[2][0]&&0==s[2][1]&&1==s[2][2]&&0==s[2][3]&&0==s[3][2]&&1==s[3][3]?[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]]:s[0].concat(s[1],s[2],s[3])}}(),t.composeMatrix=e,t.quat=function(e,i,n){var r=t.dot(e,i),r=Math.max(Math.min(r,1),-1),o=[];if(1===r)o=e;else for(var s=Math.acos(r),a=1*Math.sin(n*s)/Math.sqrt(1-r*r),l=0;4>l;l++)o.push(e[l]*(Math.cos(n*s)-r*a)+i[l]*a);return o}}(k,null),function(t,e,i){t.sequenceNumber=0;var n=function(t,e,i){this.target=t,this.currentTime=e,this.timelineTime=i,this.type="finish",this.cancelable=this.bubbles=!1,this.currentTarget=t,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};e.Animation=function(e){this.id="",e&&e._id&&(this.id=e._id),this._sequenceNumber=t.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._finishedFlag=this._inTimeline=!0,this.onfinish=null,this._finishHandlers=[],this._effect=e,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},e.Animation.prototype={_ensureAlive:function(){0>this.playbackRate&&0===this.currentTime?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,e.timeline._animations.push(this))},_tickCurrentTime:function(t,e){t!=this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=0<this._playbackRate?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(t){t=+t,isNaN(t)||(e.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-t/this._playbackRate),this._currentTimePending=!1,this._currentTime!=t&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(t,!0),e.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(t){t=+t,isNaN(t)||this._paused||this._idle||(this._startTime=t,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),e.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(t){if(t!=this._playbackRate){var i=this.currentTime;this._playbackRate=t,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),e.applyDirtiedAnimation(this)),null!=i&&(this.currentTime=i)}},get _isFinished(){return!this._idle&&(0<this._playbackRate&&this._currentTime>=this._totalDuration||0>this._playbackRate&&0>=this._currentTime)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(0<=this._playbackRate)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._idle=this._finishedFlag=!1,this._ensureAlive(),e.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=0<this._playbackRate?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,e.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._isFinished=!0,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),e.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(t,e){"function"==typeof e&&"finish"==t&&this._finishHandlers.push(e)},removeEventListener:function(t,e){"finish"==t&&(t=this._finishHandlers.indexOf(e),0<=t&&this._finishHandlers.splice(t,1))},_fireEvents:function(t){if(this._isFinished){if(!this._finishedFlag){var e=new n(this,this._currentTime,t),i=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){i.forEach(function(t){t.call(e.target,e)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(t,e){this._idle||this._paused||(null==this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this._currentTimePending=!1,this._fireEvents(t))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var t=this._effect._target;return t._activeAnimations||(t._activeAnimations=[]),t._activeAnimations},_markTarget:function(){var t=this._targetAnimations();-1===t.indexOf(this)&&t.push(this)},_unmarkTarget:function(){var t=this._targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)}}}(e,k,null),function(t,e,i){function n(t){var e=c;c=[],t<m.currentTime&&(t=m.currentTime),m._animations.sort(r),m._animations=a(t,!0,m._animations)[0],e.forEach(function(e){e[1](t)}),s()}function r(t,e){return t._sequenceNumber-e._sequenceNumber}function o(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function s(){p.forEach(function(t){t()}),p.length=0}function a(t,i,n){f=!0,d=!1,e.timeline.currentTime=t,h=!1;var r=[],o=[],s=[],a=[];return n.forEach(function(e){e._tick(t,i),e._inEffect?(o.push(e._effect),e._markTarget()):(r.push(e._effect),e._unmarkTarget()),e._needsTick&&(h=!0);var n=e._inEffect||e._needsTick;(e._inTimeline=n)?s.push(e):a.push(e)}),p.push.apply(p,r),p.push.apply(p,o),h&&requestAnimationFrame(function(){}),f=!1,[s,a]}var l=window.requestAnimationFrame,c=[],u=0;window.requestAnimationFrame=function(t){var e=u++;return 0==c.length&&l(n),c.push([e,t]),e},window.cancelAnimationFrame=function(t){c.forEach(function(e){e[0]==t&&(e[1]=function(){})})},o.prototype={_play:function(i){return i._timing=t.normalizeTimingInput(i.timing),i=new e.Animation(i),i._idle=!1,i._timeline=this,this._animations.push(i),e.restart(),e.applyDirtiedAnimation(i),i}};var h=!1,d=!1;e.restart=function(){return h||(h=!0,requestAnimationFrame(function(){}),d=!0),d},e.applyDirtiedAnimation=function(t){f||(t._markTarget(),t=t._targetAnimations(),t.sort(r),a(e.timeline.currentTime,!1,t.slice())[1].forEach(function(t){t=m._animations.indexOf(t),-1!==t&&m._animations.splice(t,1)}),s())};var p=[],f=!1,m=new o;e.timeline=m}(e,k,null),function(t,e){function i(t,e){for(var i=0,n=0;n<t.length;n++)i+=t[n]*e[n];return i}function n(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function r(t){return 2*((t.deg||0)/360+(t.grad||0)/400+(t.turn||0))*Math.PI+(t.rad||0)}function o(t){switch(t.t){case"rotatex":return t=r(t.d[0]),[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1];case"rotatey":return t=r(t.d[0]),[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1];case"rotate":case"rotatez":return t=r(t.d[0]),[Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var e=t.d[0],i=t.d[1],n=t.d[2];t=r(t.d[3]);var o=e*e+i*i+n*n;return 0===o?(e=1,n=i=0):1!==o&&(o=Math.sqrt(o),e/=o,i/=o,n/=o),o=Math.sin(t/2),t=o*Math.cos(t/2),o*=o,[1-2*(i*i+n*n)*o,2*(e*i*o+n*t),2*(e*n*o-i*t),0,2*(e*i*o-n*t),1-2*(e*e+n*n)*o,2*(i*n*o+e*t),0,2*(e*n*o+i*t),2*(i*n*o-e*t),1-2*(e*e+i*i)*o,0,0,0,0,1];case"scale":return[t.d[0],0,0,0,0,t.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0],0,0,0,0,1];case"scale3d":return[t.d[0],0,0,0,0,t.d[1],0,0,0,0,t.d[2],0,0,0,0,1];case"skew":return e=r(t.d[0]),i=r(t.d[1]),[1,Math.tan(i),0,0,Math.tan(e),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return t=r(t.d[0]),[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return t=r(t.d[0]),[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=t.d[0].px||0,i=t.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,i,0,1];case"translatex":return e=t.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translatey":return i=t.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,i,0,1];case"translatez":return n=t.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,n,1];case"translate3d":return e=t.d[0].px||0,i=t.d[1].px||0,n=t.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,i,n,1];case"perspective":return[1,0,0,0,0,1,0,0,0,0,1,t.d[0].px?-1/t.d[0].px:0,0,0,0,1];case"matrix":return[t.d[0],t.d[1],0,0,t.d[2],t.d[3],0,0,0,0,1,0,t.d[4],t.d[5],0,1];case"matrix3d":return t.d}}var s=function(){function t(t){return t[0][0]*t[1][1]*t[2][2]+t[1][0]*t[2][1]*t[0][2]+t[2][0]*t[0][1]*t[1][2]-t[0][2]*t[1][1]*t[2][0]-t[1][2]*t[2][1]*t[0][0]-t[2][2]*t[0][1]*t[1][0]}function e(t){var e=n(t);return[t[0]/e,t[1]/e,t[2]/e]}function n(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function r(t,e,i,n){return[i*t[0]+n*e[0],i*t[1]+n*e[1],i*t[2]+n*e[2]]}return function(o){if(o=[o.slice(0,4),o.slice(4,8),o.slice(8,12),o.slice(12,16)],1!==o[3][3])return null;for(var s=[],a=0;4>a;a++)s.push(o[a].slice());for(a=0;3>a;a++)s[a][3]=0;if(0===t(s))return!1;var l;if(l=[],o[0][3]||o[1][3]||o[2][3]){l.push(o[0][3]),l.push(o[1][3]),l.push(o[2][3]),l.push(o[3][3]);for(var c=1/t(s),u=s[0][0],h=s[0][1],a=s[0][2],d=s[1][0],p=s[1][1],f=s[1][2],m=s[2][0],g=s[2][1],b=s[2][2],c=[[(p*b-f*g)*c,(a*g-h*b)*c,(h*f-a*p)*c,0],[(f*m-d*b)*c,(u*b-a*m)*c,(a*d-u*f)*c,0],[(d*g-p*m)*c,(m*h-u*g)*c,(u*p-h*d)*c,0]],u=[],h=0;3>h;h++){for(d=a=0;3>d;d++)a+=s[3][d]*c[d][h];u.push(a)}for(u.push(1),c.push(u),s=c,s=[[s[0][0],s[1][0],s[2][0],s[3][0]],[s[0][1],s[1][1],s[2][1],s[3][1]],[s[0][2],s[1][2],s[2][2],s[3][2]],[s[0][3],s[1][3],s[2][3],s[3][3]]],c=[],u=0;4>u;u++){for(a=h=0;4>a;a++)h+=l[a]*s[a][u];c.push(h)}l=c}else l=[0,0,0,1];if(s=o[3].slice(0,3),c=[],c.push(o[0].slice(0,3)),u=[],u.push(n(c[0])),c[0]=e(c[0]),h=[],c.push(o[1].slice(0,3)),h.push(i(c[0],c[1])),c[1]=r(c[1],c[0],1,-h[0]),
u.push(n(c[1])),c[1]=e(c[1]),h[0]/=u[1],c.push(o[2].slice(0,3)),h.push(i(c[0],c[2])),c[2]=r(c[2],c[0],1,-h[1]),h.push(i(c[1],c[2])),c[2]=r(c[2],c[1],1,-h[2]),u.push(n(c[2])),c[2]=e(c[2]),h[1]/=u[2],h[2]/=u[2],o=c[1],a=c[2],0>i(c[0],[o[1]*a[2]-o[2]*a[1],o[2]*a[0]-o[0]*a[2],o[0]*a[1]-o[1]*a[0]]))for(a=0;3>a;a++)u[a]*=-1,c[a][0]*=-1,c[a][1]*=-1,c[a][2]*=-1;var v,y;return o=c[0][0]+c[1][1]+c[2][2]+1,1e-4<o?(v=.5/Math.sqrt(o),y=[(c[2][1]-c[1][2])*v,(c[0][2]-c[2][0])*v,(c[1][0]-c[0][1])*v,.25/v]):c[0][0]>c[1][1]&&c[0][0]>c[2][2]?(v=2*Math.sqrt(1+c[0][0]-c[1][1]-c[2][2]),y=[.25*v,(c[0][1]+c[1][0])/v,(c[0][2]+c[2][0])/v,(c[2][1]-c[1][2])/v]):c[1][1]>c[2][2]?(v=2*Math.sqrt(1+c[1][1]-c[0][0]-c[2][2]),y=[(c[0][1]+c[1][0])/v,.25*v,(c[1][2]+c[2][1])/v,(c[0][2]-c[2][0])/v]):(v=2*Math.sqrt(1+c[2][2]-c[0][0]-c[1][1]),y=[(c[0][2]+c[2][0])/v,(c[1][2]+c[2][1])/v,.25*v,(c[1][0]-c[0][1])/v]),[s,u,h,y,l]}}();t.dot=i,t.makeMatrixDecomposition=function(t){return[s(0===t.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(o).reduce(n))]}}(k,null),function(t){function e(t,e){var i=t.exec(e);if(i)return i=t.ignoreCase?i[0].toLowerCase():i[0],[i,e.substr(i.length)]}function i(t,e){if(e=e.replace(/^\s*/,""),t=t(e))return[t[0],t[1].replace(/^\s*/,"")]}function n(t,e){for(var i=t,n=e;i&&n;)i>n?i%=n:n%=i;return t*e/(i+n)}function r(t,e,i,r,o){for(var s=[],a=[],l=[],c=n(r.length,o.length),u=0;u<c;u++){var h=e(r[u%r.length],o[u%o.length]);if(!h)return;s.push(h[0]),a.push(h[1]),l.push(h[2])}return[s,a,function(e){return e=e.map(function(t,e){return l[e](t)}).join(i),t?t(e):e}]}t.consumeToken=e,t.consumeTrimmed=i,t.consumeRepeated=function(t,n,r){t=i.bind(null,t);for(var o=[];;){var s=t(r);if(!s||(o.push(s[0]),r=s[1],s=e(n,r),!s||""==s[1]))return[o,r];r=s[1]}},t.consumeParenthesised=function(t,e){for(var i=0,n=0;n<e.length&&(!/\s|,/.test(e[n])||0!=i);n++)if("("==e[n])i++;else if(")"==e[n]&&(i--,0==i&&n++,0>=i))break;return t=t(e.substr(0,n)),void 0==t?void 0:[t,e.substr(n)]},t.ignore=function(t){return function(e){return e=t(e),e&&(e[0]=void 0),e}},t.optional=function(t,e){return function(i){var n=t(i);return n?n:[e,i]}},t.consumeList=function(e,i){for(var n=[],r=0;r<e.length;r++){if(i=t.consumeTrimmed(e[r],i),!i||""==i[0])return;void 0!==i[0]&&n.push(i[0]),i=i[1]}if(""==i)return n},t.mergeNestedRepeated=r.bind(null,null),t.mergeWrappedNestedRepeated=r,t.mergeList=function(t,e,i){for(var n=[],r=[],o=[],s=0,a=0;a<i.length;a++)if("function"==typeof i[a]){var l=i[a](t[s],e[s++]);n.push(l[0]),r.push(l[1]),o.push(l[2])}else!function(t){n.push(!1),r.push(!1),o.push(function(){return i[t]})}(a);return[n,r,function(t){for(var e="",i=0;i<t.length;i++)e+=o[i](t[i]);return e}]}}(k),function(t){function e(e){var i={inset:!1,lengths:[],color:null};if((e=t.consumeRepeated(function(e){var n=t.consumeToken(/^inset/i,e);return n?(i.inset=!0,n):(n=t.consumeLengthOrPercent(e))?(i.lengths.push(n[0]),n):(n=t.consumeColor(e))?(i.color=n[0],n):void 0},/^/,e))&&e[0].length)return[i,e[1]]}var i=function(e,i,n,r){function o(t){return{inset:t,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var s=[],a=[],l=0;l<n.length||l<r.length;l++){var c=n[l]||o(r[l].inset),u=r[l]||o(n[l].inset);s.push(c),a.push(u)}return t.mergeNestedRepeated(e,i,s,a)}.bind(null,function(e,i){for(;e.lengths.length<Math.max(e.lengths.length,i.lengths.length);)e.lengths.push({px:0});for(;i.lengths.length<Math.max(e.lengths.length,i.lengths.length);)i.lengths.push({px:0});if(e.inset==i.inset&&!!e.color==!!i.color){for(var n,r=[],o=[[],0],s=[[],0],a=0;a<e.lengths.length;a++){var l=t.mergeDimensions(e.lengths[a],i.lengths[a],2==a);o[0].push(l[0]),s[0].push(l[1]),r.push(l[2])}return e.color&&i.color&&(i=t.mergeColors(e.color,i.color),o[1]=i[0],s[1]=i[1],n=i[2]),[o,s,function(t){for(var i=e.inset?"inset ":" ",o=0;o<r.length;o++)i+=r[o](t[0][o])+" ";return n&&(i+=n(t[1])),i}]}},", ");t.addPropertiesHandler(function(i){if((i=t.consumeRepeated(e,/^,/,i))&&""==i[1])return i[0]},i,["box-shadow","text-shadow"])}(k),function(t,e){function i(t){return t.toFixed(3).replace(".000","")}function n(t,e,i){return Math.min(e,Math.max(t,i))}function r(t){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t))return Number(t)}function o(t,e){return function(r,o){return[r,o,function(r){return i(n(t,e,r))}]}}t.clamp=n,t.addPropertiesHandler(r,o(0,1/0),["border-image-width","line-height"]),t.addPropertiesHandler(r,o(0,1),["opacity","shape-image-threshold"]),t.addPropertiesHandler(r,function(t,e){if(0!=t)return o(0,1/0)(t,e)},["flex-grow","flex-shrink"]),t.addPropertiesHandler(r,function(t,e){return[t,e,function(t){return Math.round(n(1,1/0,t))}]},["orphans","widows"]),t.addPropertiesHandler(r,function(t,e){return[t,e,Math.round]},["z-index"]),t.parseNumber=r,t.mergeNumbers=function(t,e){return[t,e,i]},t.numberToString=i}(k,null),function(t,e){t.addPropertiesHandler(String,function(t,e){if("visible"==t||"visible"==e)return[0,1,function(i){return 0>=i?t:1<=i?e:"visible"}]},["visibility"])}(k),function(t,e){function i(t){t=t.trim(),r.fillStyle="#000",r.fillStyle=t;var e=r.fillStyle;if(r.fillStyle="#fff",r.fillStyle=t,e==r.fillStyle)return r.fillRect(0,0,1,1),t=r.getImageData(0,0,1,1).data,r.clearRect(0,0,1,1),e=t[3]/255,[t[0]*e,t[1]*e,t[2]*e,e]}function n(e,i){return[e,i,function(e){if(e[3])for(var i=0;3>i;i++)e[i]=Math.round(Math.max(0,Math.min(255,e[i]/e[3])));return e[3]=t.numberToString(t.clamp(0,1,e[3])),"rgba("+e.join(",")+")"}]}e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=e.height=1;var r=e.getContext("2d");t.addPropertiesHandler(i,n,"background-color border-bottom-color border-left-color border-right-color border-top-color color outline-color text-decoration-color".split(" ")),t.consumeColor=t.consumeParenthesised.bind(null,i),t.mergeColors=n}(k,null),function(a,c){function g(a,b){if(b=b.trim().toLowerCase(),"0"==b&&0<="px".search(a))return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var c={};b=b.replace(a,function(t){return c[t]=null,"U"+t}),a="U("+a.source+")";for(var d=b.replace(/[-+]?(\d*\.)?\d+/g,"N").replace(new RegExp("N"+a,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(d)?(d=d.replace(f[g],"$1"),g=0):g++;if("D"==d){for(var e in c){if(d=eval(b.replace(new RegExp("U"+e,"g"),"").replace(new RegExp(a,"g"),"*0")),!isFinite(d))return;c[e]=d}return c}}}function e(t,e){return h(t,e,!0)}function h(t,e,i){var n,r=[];for(n in t)r.push(n);for(n in e)0>r.indexOf(n)&&r.push(n);return t=r.map(function(e){return t[e]||0}),e=r.map(function(t){return e[t]||0}),[t,e,function(t){var e=t.map(function(e,n){return 1==t.length&&i&&(e=Math.max(e,0)),a.numberToString(e)+r[n]}).join(" + ");return 1<t.length?"calc("+e+")":e}]}var l=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);c=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var f=g.bind(null,/deg|rad|grad|turn/g);a.parseLength=l,a.parseLengthOrPercent=c,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,c),a.parseAngle=f,a.mergeDimensions=h;var l=a.consumeParenthesised.bind(null,l),l=a.consumeRepeated.bind(void 0,l,/^/),b=a.consumeRepeated.bind(void 0,l,/^,/);a.consumeSizePairList=b,l=a.mergeNestedRepeated.bind(void 0,e," "),f=a.mergeNestedRepeated.bind(void 0,l,","),a.mergeNonNegativeSizePair=l,a.addPropertiesHandler(function(t){if((t=b(t))&&""==t[1])return t[0]},f,["background-size"]),a.addPropertiesHandler(c,e,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" ")),a.addPropertiesHandler(c,h,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin text-indent top vertical-align word-spacing".split(" "))}(k,null),function(t,e){function i(e){return t.consumeLengthOrPercent(e)||t.consumeToken(/^auto/,e)}function n(e){if((e=t.consumeList([t.ignore(t.consumeToken.bind(null,/^rect/)),t.ignore(t.consumeToken.bind(null,/^\(/)),t.consumeRepeated.bind(null,i,/^,/),t.ignore(t.consumeToken.bind(null,/^\)/))],e))&&4==e[0].length)return e[0]}e=t.mergeWrappedNestedRepeated.bind(null,function(t){return"rect("+t+")"},function(e,i){return"auto"==e||"auto"==i?[!0,!1,function(n){return n=n?e:i,"auto"==n?"auto":(n=t.mergeDimensions(n,n),n[2](n[0]))}]:t.mergeDimensions(e,i)},", "),t.parseBox=n,t.mergeBoxes=e,t.addPropertiesHandler(n,e,["clip"])}(k,null),function(t,e){function i(t){return function(e){var i=0;return t.map(function(t){return t===a?e[i++]:t})}}function n(t){return t}function r(t){return t.toFixed(6).replace(".000000","")}function o(e,i){if(e.decompositionPair!==i){e.decompositionPair=i;var n=t.makeMatrixDecomposition(e)}if(i.decompositionPair!==e){i.decompositionPair=e;var o=t.makeMatrixDecomposition(i)}return null==n[0]||null==o[0]?[[!1],[!0],function(t){return t?i[0].d:e[0].d}]:(n[0].push(0),o[0].push(1),[n,o,function(e){var i=t.quat(n[0][3],o[0][3],e[5]);return t.composeMatrix(e[0],e[1],e[2],i,e[4]).map(r).join(",")}])}function s(t){return t.replace(/(x|y|z|3d)?$/,"3d")}var a=null,l={px:0},c={deg:0},u={matrix:["NNNNNN",[a,a,0,0,a,a,0,0,0,0,1,0,a,a,0,1],n],matrix3d:["NNNNNNNNNNNNNNNN",n],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",i([a,a,1]),n],scalex:["N",i([a,1,1]),i([a,1])],scaley:["N",i([1,a,1]),i([1,a])],scalez:["N",i([1,1,a])],scale3d:["NNN",n],skew:["Aa",null,n],skewx:["A",null,i([a,c])],skewy:["A",null,i([c,a])],translate:["Tt",i([a,a,l]),n],translatex:["T",i([a,l,l]),i([a,l])],translatey:["T",i([l,a,l]),i([l,a])],translatez:["L",i([l,l,a])],translate3d:["TTL",n]};t.addPropertiesHandler(function(e){if(e=e.toLowerCase().trim(),"none"==e)return[];for(var i,n=/\s*(\w+)\(([^)]*)\)/g,r=[],o=0;(i=n.exec(e))&&i.index==o;){var o=i.index+i[0].length,s=i[1],a=u[s];if(!a)break;if(i=i[2].split(","),a=a[0],a.length<i.length)break;for(var h=[],d=0;d<a.length;d++){var p,f=i[d],m=a[d];if(p=f?{A:function(e){return"0"==e.trim()?c:t.parseAngle(e)},N:t.parseNumber,T:t.parseLengthOrPercent,L:t.parseLength}[m.toUpperCase()](f):{a:c,n:h[0],t:l}[m],void 0===p)return;h.push(p)}if(r.push({t:s,d:h}),n.lastIndex==e.length)return r}},function(e,i){var n=t.makeMatrixDecomposition&&!0,r=!1;if(!e.length||!i.length){e.length||(r=!0,e=i,i=[]);for(var a=0;a<e.length;a++){var l=e[a].t,c=e[a].d,h="scale"==l.substr(0,5)?1:0;i.push({t:l,d:c.map(function(t){if("number"==typeof t)return h;var e,i={};for(e in t)i[e]=h;return i})})}}var c=[],d=[],p=[];if(e.length!=i.length){if(!n)return;var f=o(e,i),c=[f[0]],d=[f[1]],p=[["matrix",[f[2]]]]}else for(a=0;a<e.length;a++){var l=e[a].t,m=i[a].t,g=e[a].d,b=i[a].d,f=u[l],v=u[m];if("perspective"==l&&"perspective"==m||!("matrix"!=l&&"matrix3d"!=l||"matrix"!=m&&"matrix3d"!=m)){if(!n)return;f=o([e[a]],[i[a]]),c.push(f[0]),d.push(f[1]),p.push(["matrix",[f[2]]])}else{if(l!=m)if(f[2]&&v[2]&&l.replace(/[xy]/,"")==m.replace(/[xy]/,""))l=l.replace(/[xy]/,""),g=f[2](g),b=v[2](b);else{if(!f[1]||!v[1]||s(l)!=s(m)){if(!n)return;f=o(e,i),c=[f[0]],d=[f[1]],p=[["matrix",[f[2]]]];break}l=s(l),g=f[1](g),b=v[1](b)}for(var v=[],m=[],y=[],_=0;_<g.length;_++)f=("number"==typeof g[_]?t.mergeNumbers:t.mergeDimensions)(g[_],b[_]),v[_]=f[0],m[_]=f[1],y.push(f[2]);c.push(v),d.push(m),p.push([l,y])}}return r&&(d=c=d),[c,d,function(t){return t.map(function(t,e){return t=t.map(function(t,i){return p[e][1][i](t)}).join(","),"matrix"==p[e][0]&&16==t.split(",").length&&(p[e][0]="matrix3d"),p[e][0]+"("+t+")"}).join(" ")}]},["transform"])}(k,null),function(t){function e(e){return e=100*Math.round(e/100),e=t.clamp(100,900,e),400===e?"normal":700===e?"bold":String(e)}t.addPropertiesHandler(function(t){if(t=Number(t),!(isNaN(t)||100>t||900<t||0!==t%100))return t},function(t,i){return[t,i,e]},["font-weight"])}(k),function(t){function e(e){return t.consumeToken(/^(left|center|right|top|bottom)\b/i,e)||t.consumeLengthOrPercent(e)}function i(i,n){if((n=t.consumeRepeated(e,/^/,n))&&""==n[1]&&(n=n[0],n[0]=n[0]||"center",n[1]=n[1]||"center",3==i&&(n[2]=n[2]||{px:0}),n.length==i)&&((/top|bottom/.test(n[0])||/left|right/.test(n[1]))&&(i=n[0],n[0]=n[1],n[1]=i),/left|right|center|Object/.test(n[0])&&/top|bottom|center|Object/.test(n[1])))return n.map(function(t){return"object"==typeof t?t:r[t]})}function n(i){if(i=t.consumeRepeated(e,/^/,i)){for(var n=i[0],o=[{"%":50},{"%":50}],s=0,a=!1,l=0;l<n.length;l++){var c=n[l];if("string"==typeof c)a=/bottom|right/.test(c),s={left:0,right:0,center:s,top:1,bottom:1}[c],o[s]=r[c],"center"==c&&s++;else{if(a){var a=void 0,u={};for(a in c)u[a]=-c[a];c=u,c["%"]=(c["%"]||0)+100}o[s]=c,s++,a=!1}}return[o,i[1]]}}var r={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},o=t.mergeNestedRepeated.bind(null,t.mergeDimensions," ");t.addPropertiesHandler(i.bind(null,3),o,["transform-origin"]),t.addPropertiesHandler(i.bind(null,2),o,["perspective-origin"]),t.consumePosition=n,t.mergeOffsetList=o,o=t.mergeNestedRepeated.bind(null,o,", "),t.addPropertiesHandler(function(e){if((e=t.consumeRepeated(n,/^,/,e))&&""==e[1])return e[0]},o,["background-position","object-position"])}(k),function(t){var e=t.consumeParenthesised.bind(null,t.parseLengthOrPercent),i=t.consumeRepeated.bind(void 0,e,/^/),n=t.mergeNestedRepeated.bind(void 0,t.mergeDimensions," "),r=t.mergeNestedRepeated.bind(void 0,n,",");t.addPropertiesHandler(function(n){var r=t.consumeToken(/^circle/,n);return r&&r[0]?["circle"].concat(t.consumeList([t.ignore(t.consumeToken.bind(void 0,/^\(/)),e,t.ignore(t.consumeToken.bind(void 0,/^at/)),t.consumePosition,t.ignore(t.consumeToken.bind(void 0,/^\)/))],r[1])):(r=t.consumeToken(/^ellipse/,n))&&r[0]?["ellipse"].concat(t.consumeList([t.ignore(t.consumeToken.bind(void 0,/^\(/)),i,t.ignore(t.consumeToken.bind(void 0,/^at/)),t.consumePosition,t.ignore(t.consumeToken.bind(void 0,/^\)/))],r[1])):(n=t.consumeToken(/^polygon/,n))&&n[0]?["polygon"].concat(t.consumeList([t.ignore(t.consumeToken.bind(void 0,/^\(/)),t.optional(t.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),t.consumeSizePairList,t.ignore(t.consumeToken.bind(void 0,/^\)/))],n[1])):void 0},function(e,i){if(e[0]===i[0])return"circle"==e[0]?t.mergeList(e.slice(1),i.slice(1),["circle(",t.mergeDimensions," at ",t.mergeOffsetList,")"]):"ellipse"==e[0]?t.mergeList(e.slice(1),i.slice(1),["ellipse(",t.mergeNonNegativeSizePair," at ",t.mergeOffsetList,")"]):"polygon"==e[0]&&e[1]==i[1]?t.mergeList(e.slice(2),i.slice(2),["polygon(",e[1],r,")"]):void 0},["shape-outside"])}(k),function(t,e){function i(t,e){e.concat([t]).forEach(function(e){e in document.documentElement.style&&(n[t]=e)})}var n={};i("transform",["webkitTransform","msTransform"]),i("transformOrigin",["webkitTransformOrigin"]),i("perspective",["webkitPerspective"]),i("perspectiveOrigin",["webkitPerspectiveOrigin"]),t.propertyName=function(t){return n[t]||t}}(k,null)}(),!function(){if(void 0===document.createElement("div").animate([]).oncancel){var t;t=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};var e=function(t,e,i){this.target=t,this.currentTime=e,this.timelineTime=i,this.type="cancel",this.cancelable=this.bubbles=!1,this.currentTarget=t,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},i=window.Element.prototype.animate;window.Element.prototype.animate=function(n,r){n=i.call(this,n,r),n._cancelHandlers=[],n.oncancel=null;var o=n.cancel;n.cancel=function(){o.call(this);var i=new e(this,null,t()),n=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){n.forEach(function(t){t.call(i.target,i)})},0)};var s=n.addEventListener;n.addEventListener=function(t,e){"function"==typeof e&&"cancel"==t?this._cancelHandlers.push(e):s.call(this,t,e)};var a=n.removeEventListener;return n.removeEventListener=function(t,e){"cancel"==t?(t=this._cancelHandlers.indexOf(e),0<=t&&this._cancelHandlers.splice(t,1)):a.call(this,t,e)},n}}}(),function(t){var e=document.documentElement,i=null,n=!1;try{var r="0"==getComputedStyle(e).getPropertyValue("opacity")?"1":"0",i=e.animate({opacity:[r,r]},{duration:1});i.currentTime=0,n=getComputedStyle(e).getPropertyValue("opacity")==r}catch(t){}finally{i&&i.cancel()}if(!n){var o=window.Element.prototype.animate;window.Element.prototype.animate=function(e,i){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&e[Symbol.iterator]&&(e=Array.from(e)),Array.isArray(e)||null===e||(e=t.convertToArrayForm(e)),o.call(this,e,i)}}}(e),c.true=a}({},function(){return this}());var Videobox=function(t,e,i){e=void 0===e?{}:e;var n=this;this.isOpen=!1,this.animations=[],this.defaults={width:720,height:405,closeText:"Close",padding:30,closeKeys:[27,81],hideBottom:!1,root:document.body,animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}},this.overlay=create("div","vbOverlay",function(){return n.close()}),this.wrap=create("div","vbWrap"),this.center=create("div","vbCenter"),this.wrap.appendChild(this.center),this.responsive=create("div","vbResponsive"),this.center.appendChild(this.responsive),this.bottomContainer=create("div","vbBottomContainer"),this.center.appendChild(this.bottomContainer),this.video=create("iframe","vbVideo"),this.video.allowFullscreen=!0,this.video.frameBorder="0px",hide(this.video),this.responsive.appendChild(this.video),this.bottom=create("div","vbBottom"),this.bottomContainer.appendChild(this.bottom),this.button=create("a","vbCloseLink",function(){return n.close()}),this.button.innerHTML='<span id="vbCloseText">'+this.defaults.closeText+'</span><i class="vb-icon-close"></i>',this.bottom.appendChild(this.button),this.caption=create("strong","vbCaption"),this.bottom.appendChild(this.caption),this.closeText=this.button.querySelector("#vbCloseText"),window.addEventListener("resize",function(){n.isOpen&&n.activeVideo&&n.setPlayerSizePosition()}),window.addEventListener("keyup",function(t){n.activeVideo&&0<=n.activeVideo.options.closeKeys.indexOf(t.keyCode)&&n.close()}),t&&this.bind(t,e,i||this.linkMapper)};Videobox.prototype.bind=function(t,e,i){e=void 0===e?{}:e,i=void 0===i?this.linkMapper:i;var n=this;"string"==typeof t&&(t=iterableToArray(document.querySelectorAll(t))),t.forEach(function(t){t.vbListener&&t.removeEventListener("click",t.vbListener),t.vbiListener&&t.removeEventListener("click",t.vbiListener),t.vbListener=function(r){return r.preventDefault(),r.stopPropagation(),r=i(t),r.options=Object.assign({},e,r.options),n.open(r),!1},t.addEventListener("click",t.vbListener)})},Videobox.prototype.open=function(t){"VbInline"in window&&window.VbInline.close(),this.close(),t.options=Object.assign({},this.defaults,t.options),t.options.root||(t.options.root=document.body),this.setup(t);var e=t.origin.target,e=e.querySelector(e.getAttribute("data-target"))||e,i=this.wrap.getBoundingClientRect(),n=e.getBoundingClientRect();toggleClass(e,"vb_line_fix",!0),t.origin=Object.assign({},{x:n.left-i.left+e.clientWidth/2,y:n.top-i.top+e.clientHeight/2,width:e.clientWidth,height:e.clientHeight},t.origin),toggleClass(e,"vb_line_fix",!1),this.changeVideo(t)},Videobox.prototype.close=function(){return this.stop(),[this.wrap,this.bottomContainer,this.overlay].forEach(function(t){return toggleClass(t,"visible",!1)}),this.wrap.style.top="0px",this.wrap.style.left="0px",this.activeVideo=null,!1},Videobox.prototype.setPlayerSizePosition=function(){if(this.activeVideo){this.setPlayerPosition(this.activeVideo.options.root);var t=this.activeVideo.options.width,e=this.activeVideo.options.height;if(t+2*this.activeVideo.options.padding>this.wrap.clientWidth)var i=this.wrap.clientWidth-2*this.activeVideo.options.padding,e=e*i/t,t=i;return e+2*this.activeVideo.options.padding>this.wrap.clientHeight&&(e=this.wrap.clientHeight-2*this.activeVideo.options.padding),t=100*e/t,this.responsive.style.paddingBottom=t+"%",t}},Videobox.prototype.linkMapper=function(t){var e=JSON.parse(t.getAttribute("data-videobox"))||{};if(e.root){var i=e.root;"string"==typeof i&&(i=iterableToArray(document.querySelectorAll(i))),0<i.length?e.root=i[0]:e.pop("root")}return{url:t.getAttribute("href")||"",title:t.getAttribute("title")||"",options:e,origin:{target:t}}},Videobox.prototype.setup=function(t){this.closeText.innerText=t.options.closeText,t.options.root.appendChild(this.overlay),t.options.root.appendChild(this.wrap),this.setPlayerPosition(t.options.root)},Videobox.prototype.setPlayerPosition=function(t){t=this.wrap.offsetParent;var e=this.wrap.getBoundingClientRect(),i=this.overlay.getBoundingClientRect(),n=this.wrap.offsetLeft-t.offsetLeft,r=i.left-e.left;this.wrap.style.top=this.wrap.offsetTop-t.offsetTop+(i.top-e.top)+"px",this.wrap.style.left=n+r+"px"},Videobox.prototype.changeVideo=function(t){var e=this;this.activeVideo=t,this.caption.innerHTML=this.activeVideo.title;var i=this.setPlayerSizePosition();this.isOpen=!0;var n={top:this.activeVideo.origin.y-this.wrap.clientHeight/2+"px",left:this.activeVideo.origin.x-this.wrap.clientWidth/2+"px",maxWidth:this.activeVideo.origin.width+"px"};t={top:"0px",left:"0px",maxWidth:this.activeVideo.options.width+"px"},applyStyles(this.center,n),[this.wrap,this.overlay].forEach(function(t){return toggleClass(t,"visible",!0)}),toggleClass(this.wrap,"animating",!0);var r=100*this.activeVideo.origin.height/this.activeVideo.origin.width||i;r!=i&&this.animations.push(this.responsive.animate([{paddingBottom:r+"%"},{paddingBottom:i+"%"}],this.activeVideo.options.animation)),i=this.center.animate([n,t],this.activeVideo.options.animation),i.onfinish=function(){return e.animateBotton()},this.animations.push(i),applyStyles(this.center,t),i.play()},Videobox.prototype.animateBotton=function(){var t=this;if(this.activeVideo.options.hideBottom)this.showVideo();else{var e=this.bottomContainer.animate([{maxHeight:"0px"},{maxHeight:"200px"}],this.activeVideo.options.animation);toggleClass(this.bottomContainer,"visible",!0),e.onfinish=function(){return t.showVideo()},this.animations.push(e),e.play()}},Videobox.prototype.showVideo=function(){this.isOpen&&!this.video.getAttribute("src")&&(show(this.video),this.video.setAttribute("src",this.activeVideo.url),toggleClass(this.wrap,"animating",!1))},Videobox.prototype.stop=function(){this.animations.forEach(function(t){return t.cancel()}),this.animations=[],this.isOpen=!1,this.video.setAttribute("src",""),hide(this.video),toggleClass(this.wrap,"animating",!1)};var VideoboxObj=new Videobox;window.Videobox=VideoboxObj,"undefined"!=typeof jQuery&&(jQuery.videobox=function(t){VideoboxObj.open(t)},jQuery.vbClose=function(){VideoboxObj.close()},jQuery.fn.videobox=function(t,e){t=void 0===t?{}:t;var i=iterableToArray(this);e?VideoboxObj.bind(i,t,e):VideoboxObj.bind(i,t)}),"undefined"!=typeof jQuery&&libBind(jQuery),"undefined"!=typeof Zepto&&libBind(Zepto);var VbInline=function(t,e,i){e=void 0===e?{}:e;var n=this;this.hidding=this.isOpen=!1,this.animations=[],this.hidden=[],this.defaults={width:720,height:405,closeText:"Close",padding:30,closeTimeout:1e3,closeKeys:[27,81],animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}},this.wrap=create("div","vbiWrap"),this.responsive=create("div","vbiResponsive"),this.wrap.appendChild(this.responsive),this.caption=document.createElement("span"),this.caption.className="vb_video_title",this.wrap.appendChild(this.caption),this.button=create("div","vbiClose",function(){return n.close()}),this.button.innerHTML='<i class="vb-icon-circle-close-invert"></i>',this.wrap.appendChild(this.button),this.video=create("iframe","vbiVideo"),this.video.allowFullscreen=!0,this.video.frameBorder="0px",hide(this.video),this.responsive.appendChild(this.video),window.addEventListener("keyup",function(t){n.activeVideo&&0<=n.activeVideo.options.closeKeys.indexOf(t.keyCode)&&n.close()}),t&&this.bind(t,e,i||this.linkMapper)};VbInline.prototype.bind=function(t,e,i){e=void 0===e?{}:e,i=void 0===i?this.linkMapper:i;var n=this;"string"==typeof t&&(t=iterableToArray(document.querySelectorAll(t))),t.forEach(function(t){t.vbListener&&t.removeEventListener("click",t.vbListener),t.vbiListener&&t.removeEventListener("click",t.vbiListener),t.vbiListener=function(r){return r.preventDefault(),r.stopPropagation(),r=i(t),r.options=Object.assign({},e,r.options),n.open(r),!1},t.addEventListener("click",t.vbiListener)})},VbInline.prototype.open=function(t){var e=this;"Videobox"in window&&window.Videobox.close(),t.options=Object.assign({},this.defaults,t.options);var i=t.origin.target,i=i.querySelector(i.getAttribute("data-target"))||i;toggleClass(i,"vb_line_fix",!0),t.origin=Object.assign({},{x:i.clientWidth/2,y:i.clientHeight/2,width:i.clientWidth,height:i.clientHeight},t.origin),toggleClass(i,"vb_line_fix",!1),this.close(function(){return e.changeVideo(t)})},VbInline.prototype.close=function(t){var e=this;if(this.stop(),!this.hidding)if(this.wrap.parentElement&&this.activeVideo){this.hidding=!0;var i=this.activeVideo.origin.width+"px",n=this.wrap.animate([{maxWidth:this.activeVideo.options.width+2*this.activeVideo.options.padding+"px"},{maxWidth:i}],this.activeVideo.options.animation);n.onfinish=function(){return e.hide(t)},this.wrap.style.maxWidth=i,n.play(),i=100*this.activeVideo.origin.height/this.activeVideo.origin.width+"%",n=this.responsive.animate([{paddingBottom:100*this.activeVideo.options.height/this.activeVideo.options.width+"%"},{paddingBottom:i}],this.activeVideo.options.animation),this.responsive.style.paddingBottom=i,n.play()}else this.hide(t);return!1},VbInline.prototype.linkMapper=function(t){return{url:t.getAttribute("href")||"",title:t.getAttribute("title")||"",options:JSON.parse(t.getAttribute("data-videobox"))||{},origin:{target:t}}},VbInline.prototype.setup=function(){insertAfter(this.wrap,this.activeVideo.origin.target),hide(this.activeVideo.origin.target),this.hidden.push(this.activeVideo.origin.target)},VbInline.prototype.changeVideo=function(t){var e=this;this.activeVideo=t,this.setup(),this.wrap.setAttribute("style",this.activeVideo.options.style),this.wrap.setAttribute("class",this.activeVideo.options.class),this.caption.innerHTML=this.activeVideo.title,toggleClass(this.button,"visible",!0),this.isOpen=!0;var i={maxWidth:this.activeVideo.options.width+2*this.activeVideo.options.padding+"px"},n=this.wrap.animate([{maxWidth:this.activeVideo.origin.width+"px"},i],this.activeVideo.options.animation);applyStyles(this.wrap,i),n.onfinish=function(){return e.showVideo()},this.animations.push(n),n.play(),i={paddingBottom:100*this.activeVideo.options.height/this.activeVideo.options.width+"%"},n=this.responsive.animate([{paddingBottom:100*this.activeVideo.origin.height/this.activeVideo.origin.width+"%"},i],this.activeVideo.options.animation),n.onfinish=function(){e.timer=window.setTimeout(function(){return toggleClass(e.button,"visible",!1)},t.options.closeTimeout)},this.animations.push(n),n.play(),applyStyles(this.responsive,i)},VbInline.prototype.showVideo=function(){this.isOpen&&(show(this.video),this.video.setAttribute("src",this.activeVideo.url))},VbInline.prototype.hide=function(t){this.wrap.parentElement&&this.wrap.parentNode.removeChild(this.wrap),this.hidden.forEach(function(t){return show(t)}),this.hidden=[],this.hidding=!1,this.activeVideo=null,"function"==typeof t&&t()},VbInline.prototype.stop=function(){this.animations.forEach(function(t){return t.cancel()}),this.animations=[],this.isOpen=!1,this.video.setAttribute("src",""),window.clearTimeout(this.timer),hide(this.video)};var VbInlineObj=new VbInline;window.VbInline=VbInlineObj,"undefined"!=typeof jQuery&&libBind$1(jQuery),"undefined"!=typeof Zepto&&libBind$1(Zepto);var VbSlider=function(t,e){e=void 0===e?{}:e;var i=this;this.queue=[],this.timeout=-1,this.moving=!1,this.visible=-1,this.detachedElements=[],this.options={moveAll:!1,target:"",singleDuration:500,doubleClickTimeout:200,animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}},this.outer=createClass("div","vb_slider_outer"),this.prev=createClass("div","vb_slider_prev",function(){return i.showPrev()}),this.prev.innerHTML='<i class="vb-icon-prev"></i>',this.outer.appendChild(this.prev),this.wrap=createClass("div","vb_slider_wrap"),this.outer.appendChild(this.wrap),this.next=createClass("div","vb_slider_next",function(){return i.showNext()}),this.next.innerHTML='<i class="vb-icon-next"></i>',this.outer.appendChild(this.next),this.content=createClass("div","vb_slider_cont"),this.wrap.appendChild(this.content),this.buttons=iterableToArray(this.outer.querySelectorAll("i")),this.target=t;var n=this.attached;insertAfter(this.outer,this.target),this.content.appendChild(this.target),this.basis=parseInt(t.getAttribute("data-width"))||n[0].clientWidth,this.options=Object.assign(this.options,e),toggleClass(this.content,"vb-slider__move-all",this.options.moveAll),this.setCount()};VbSlider.bind=function(t,e){e=void 0===e?{}:e;var i=this;"string"==typeof t&&(t=iterableToArray(document.querySelectorAll(t)));var n=[];return t.forEach(function(t){var r=(t.getAttribute("data-target")||"").trim(),o=(t.getAttribute("data-move")||"single").trim(),s={};r&&(s.target=r),o&&(s.moveAll="all"==o),n.push(i.getSlider(t,Object.assign({},e,s)))}),n},VbSlider.getSlider=function(t,e){e=void 0===e?{}:e;var i=this.sliders.find(function(e){return e.target==t});return i?(i.options=Object.assign(i.options,e),i):new VbSlider(t,e)},VbSlider.updateSizes=function(){this.sliders.forEach(function(t){return t.setCount()})},VbSlider.prototype.showPrev=function(){this.queueMove("r")},VbSlider.prototype.showNext=function(){this.queueMove("l")},VbSlider.prototype.setBasis=function(t){t!=this.basis&&(this.basis=t,this.setCount())},VbSlider.prototype.getTarget=function(){return this.target},VbSlider.prototype.queueMove=function(t){var e=this;0<this.queue.length&&this.queue[this.queue.length-1]!=t?this.queue.pop():this.queue.push(t),0<=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.timeout=-1,!e.moving&&0<e.queue.length&&e.move()},this.options.doubleClickTimeout)},VbSlider.prototype.move=function(){var t=this;this.moving=!0;for(var e=this.queue.pop(),i=this.target.clientHeight,n=1;0<this.queue.length;)n+=this.queue.pop()==e?1:-1;if(0==n)this.moving=!1;else{0>n&&(e="l"==e?"r":"l",n=0-n);var r=(this.options.moveAll?this.visible:1)*n,r=r%(this.visible+this.detachedElements.length);if("l"==e)for(n=0;n<r&&0<this.detachedElements.length;n++)this.target.appendChild(this.detachedElements.shift());else for(n=0;n<r&&0<this.detachedElements.length;n++)this.target.insertBefore(this.detachedElements.pop(),this.target.firstChild);var n=this.attached,o="l"==e?n.slice(0,n.length-this.visible):n.slice(this.visible);detach(o);var n=this.target.clientHeight,s=100*r/this.visible;if("l"==e)for(var a=o.length-1;0<=a;a--)this.target.insertBefore(o[a],this.target.firstChild);else for(a=0;a<o.length;a++)this.target.appendChild(o[a]);r=this.options.singleDuration?Object.assign({},this.options.animation,{duration:this.options.singleDuration*r}):this.options.animation,a=100*s/(s+100),o={transform:"translate("+("l"==e?0:-a)+"%)"},a={transform:"translate("+("l"==e?-a:0)+"%)"},this.content.style.width=s+100+"%",s=this.content.animate([o,a],r),s.addEventListener("finish",function(){t.content.style.width="100%",t.skip(e)}),s=this.content.animate([{height:i+"px"},{height:n+"px"}],r),this.content.style.height=n+"px";var l=0;this.options.target&&(l=(this.target.querySelector(this.options.target)||{offsetHeight:0}).offsetHeight/2),this.buttons.forEach(function(t){return t.style.top=l?l+"px":""})}},VbSlider.prototype.skip=function(t){var e=this,i=this.attached;"l"==t?(t=i.slice(0,i.length-this.visible),detach(t),t.forEach(function(t){return e.detachedElements.push(t)})):"r"==t&&(t=i.slice(this.visible),detach(t),t.forEach(function(t){return e.detachedElements.unshift(t)})),0<this.queue.length&&0>this.timeout?this.move():this.moving=!1;
},VbSlider.prototype.setCount=function(){var t=this.visible,e=this.target.clientWidth,i=this.attached,i=this.basis+i[0].offsetWidth-i[0].clientWidth,n=Math.floor(e/this.basis);1>n?n=1:i/(e/(n+1))<2-i/(e/n)&&n++,n!=t&&(this.visible=n,this.setAttached()),this.content.style.height=this.target.clientHeight+"px";var r=0;this.options.target&&(r=(this.target.querySelector(this.options.target)||{offsetHeight:0}).offsetHeight/2),this.buttons.forEach(function(t){return t.style.top=r?r+"px":""})},VbSlider.prototype.setAttached=function(){var t=this.attached;if(t.length<this.visible)for(t=t.length;t<this.visible&&0<this.detachedElements.length;t++)this.target.appendChild(this.detachedElements.shift());else if(t.length>this.visible)for(var e=t.length-1;e>=this.visible;e--)this.detachedElements.unshift(t[e]),detach([t[e]])},$jscomp.global.Object.defineProperties(VbSlider.prototype,{attached:{configurable:!0,enumerable:!0,get:function(){return iterableToArray(this.target.children)}},isMoving:{configurable:!0,enumerable:!0,get:function(){return this.moving}}}),VbSlider.sliders=[],window.addEventListener("resize",function(){return VbSlider.updateSizes()}),window.VbSlider=VbSlider,"undefined"!=typeof jQuery&&libBind$2(jQuery),"undefined"!=typeof Zepto&&libBind$2(Zepto),"loading"!=document.readyState?bindAll():document.addEventListener("readystatechange",function t(){"loading"!=document.readyState&&(document.removeEventListener("readystatechange",t),bindAll())});
//# sourceMappingURL=videobox.bundle.map
